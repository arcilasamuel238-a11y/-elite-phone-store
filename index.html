<script>
const USER="admin"
const PASSWORD="Heidy.011625"

let products=[
{name:"iPhone 13",price:1800000,specs:"Pantalla 6.1 · Chip A15 · Cámara 12MP",mem:"128GB",img:"https://store.storeimages.cdn-apple.com/4668/as-images.apple.com/is/iphone-13-midnight"},
{name:"iPhone 14",price:2200000,specs:"Pantalla 6.1 · Chip A15 · Cámara mejorada",mem:"128GB",img:"https://store.storeimages.cdn-apple.com/4668/as-images.apple.com/is/iphone-14-midnight"},
{name:"iPhone 15",price:2800000,specs:"USB‑C · Cámara 48MP · Chip A16",mem:"128GB",img:"https://store.storeimages.cdn-apple.com/4668/as-images.apple.com/is/iphone-15-pink"},
{name:"iPhone 15 Pro Max",price:3200000,specs:"Zoom 5x · Titanio · A17 Pro",mem:"256GB",img:"https://store.storeimages.cdn-apple.com/4668/as-images.apple.com/is/iphone-15-pro-max-natural"}
]

let filtered=[...products]
const grid=document.getElementById('grid')

function renderProducts(){
  grid.innerHTML=""
  filtered.forEach(p=>{
    const div=document.createElement('div')
    div.className='card'
    div.innerHTML=`
      <img src="${p.img}" onclick="openModal('${p.name}','${p.specs}','${p.mem}')">
      <h3>${p.name}</h3>
      <div class="spec">${p.specs}</div>
      <div class="price">$${p.price.toLocaleString()}</div>
      <button onclick="add('${p.name}',${p.price})">Añadir al carrito</button>
    `
    grid.appendChild(div)
  })
}
renderProducts()

function filterProducts(){
  const q=search.value.toLowerCase()
  filtered=products.filter(p=>p.name.toLowerCase().includes(q))
  renderProducts()
}

let cart=[]
function toggleCart(){document.getElementById('cart').classList.toggle('open')}
function add(name,price){cart.push({name,price});renderCart()}
function clearCart(){cart=[];renderCart()}

function renderCart(){
  let html="",total=0
  cart.forEach(p=>{
    html+=`<div class='item'>${p.name} - $${p.price.toLocaleString()}</div>`
    total+=p.price
  })
  list.innerHTML=html
  sum.innerText="Total: $"+total.toLocaleString()
  badge.style.display=cart.length?"block":"none"
  badge.innerText=cart.length
}

function whatsapp(){
  if(!cart.length)return alert('Carrito vacío')
  let msg='Hola quiero comprar:%0A',total=0
  cart.forEach(p=>{
    msg+=`- ${p.name} $${p.price.toLocaleString()}%0A`
    total+=p.price
  })
  msg+=`%0ATotal: $${total.toLocaleString()}`
  window.open(`https://wa.me/573041368485?text=${msg}`)
}

function openModal(t,s,m){
  modal.classList.add('open')
  mTitle.innerText=t
  mSpecs.innerText=s
  mMem.innerText='Memorias disponibles: '+m
}
function closeModal(){modal.classList.remove('open')}

function openLogin(){login.style.display='flex'}
function closeLogin(){login.style.display='none'}

function loginAdmin(){
  if(user.value===USER && pass.value===PASSWORD){
    alert('Bienvenido administrador')
    closeLogin()
  } else {
    alert('Datos incorrectos')
  }
}
</script>
