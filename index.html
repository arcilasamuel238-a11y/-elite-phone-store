<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Elite Phone Store</title>

<style>
body{
  font-family: Arial;
  margin:0;
  background:#f2f2f2;
}

header{
  background:#000;
  color:white;
  padding:15px;
  text-align:center;
}

.search{
  width:90%;
  max-width:400px;
  padding:10px;
  margin:15px auto;
  display:block;
}

.products{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(200px,1fr));
  gap:15px;
  padding:20px;
}

.card{
  background:white;
  padding:15px;
  border-radius:10px;
  text-align:center;
}

.card img{
  width:100%;
  border-radius:10px;
  margin-bottom:10px;
}

button{
  padding:8px 12px;
  margin-top:8px;
  cursor:pointer;
}

#cart{
  background:#fff;
  padding:15px;
  border-radius:10px;
  margin:20px;
}
</style>
</head>

<body>

<header>
<h1>Elite Phone Store</h1>
<button onclick="login()">Modo Admin</button>
</header>

<input class="search" placeholder="Buscar equipo..." onkeyup="buscar(this.value)">

<div class="products" id="products"></div>

<div id="cart">
  <h2>üõí Carrito de compras</h2>
  <ul id="cartItems"></ul>
  <button onclick="checkout()">Finalizar compra</button>
</div>

<script>
const USER="admin";
const PASS="Heidy.011625";

let admin=false;
let carrito=[];

let productos = JSON.parse(localStorage.getItem("productos")) || [
  {
    nombre:"iPhone 13",
    precio:"2.000.000",
    desc:"128GB",
    img:"https://store.storeimages.cdn-apple.com/4668/as-images.apple.com/is/iphone-13-select-2021?wid=470&hei=556&fmt=png-alpha&.v=1629842709000",
    ficha:`Pantalla Super Retina XDR de 6.1"\nChip A15 Bionic\nC√°mara dual 12MP\nGrabaci√≥n 4K HDR`
  },
  {
    nombre:"iPhone 14",
    precio:"2.400.000",
    desc:"128GB",
    img:"https://store.storeimages.cdn-apple.com/4668/as-images.apple.com/is/iphone-14-select-2022?wid=470&hei=556&fmt=png-alpha&.v=1660744988430",
    ficha:`Pantalla Super Retina XDR de 6.1"\nChip A15 Bionic mejorado\nC√°mara dual 12MP\nDetecci√≥n de accidentes`
  },
  {
    nombre:"iPhone 15",
    precio:"3.000.000",
    desc:"Nuevo",
    img:"https://store.storeimages.cdn-apple.com/4668/as-images.apple.com/is/iphone-15-select-2023?wid=470&hei=556&fmt=png-alpha&.v=1692925209320",
    ficha:`Pantalla Super Retina XDR de 6.1"\nChip A16 Bionic\nC√°mara principal 48MP\nPuerto USB‚ÄëC`
  },
  {
    nombre:"iPhone 16 Pro",
    precio:"4.000.000",
    desc:"256GB",
    img:"https://store.storeimages.cdn-apple.com/4668/as-images.apple.com/is/iphone-16-pro-select-2024?wid=470&hei=556&fmt=png-alpha",
    ficha:`Pantalla ProMotion de 6.1"\nChip A18 Pro\nC√°mara 48MP + teleobjetivo\nTitanio ultraligero`
  },
  {
    nombre:"iPhone 16 Pro Max",
    precio:"4.500.000",
    desc:"512GB",
    img:"https://store.storeimages.cdn-apple.com/4668/as-images.apple.com/is/iphone-16-pro-max-select-2024?wid=470&hei=556&fmt=png-alpha",
    ficha:`Pantalla ProMotion de 6.7"\nChip A18 Pro\nC√°mara 48MP + teleobjetivo 5x\nTitanio ultraligero`
  }
];

function guardar(){
  localStorage.setItem("productos",JSON.stringify(productos));
}

function render(lista=productos){
  const cont=document.getElementById("products");
  cont.innerHTML="";

  lista.forEach((p,i)=>{
    cont.innerHTML+=`
      <div class="card">
        <img src="${p.img}" alt="${p.nombre}">
        <h3>${p.nombre}</h3>
        <p>${p.desc}</p>
        <strong>$${p.precio}</strong>
        <pre style="text-align:left;white-space:pre-wrap;">${p.ficha}</pre>
        <br>
        <button onclick="addToCart(${i})">Agregar al carrito</button>
        ${admin ? `
          <br>
          <button onclick="editar(${i})">Editar</button>
          <button onclick="eliminar(${i})">Eliminar</button>
        `:""}
      </div>
    `;
  });

  if(admin){
    cont.innerHTML+=`
      <div class="card">
        <h3>Agregar nuevo producto</h3>
        <button onclick="agregar()">‚ûï Agregar</button>
      </div>
    `;
  }
}

function login(){
  const u=prompt("Usuario:");
  const p=prompt("Contrase√±a:");

  if(u===USER && p===PASS){
    admin=true;
    alert("Modo admin activado");
    render();
  }else{
    alert("Datos incorrectos");
  }
}

function editar(i){
  const nuevoPrecio=prompt("Nuevo precio:",productos[i].precio);
  const nuevaDesc=prompt("Nueva descripci√≥n:",productos[i].desc);
  const nuevaImg=prompt("Nueva URL de imagen:",productos[i].img);

  if(nuevoPrecio) productos[i].precio=nuevoPrecio;
  if(nuevaDesc) productos[i].desc=nuevaDesc;
  if(nuevaImg) productos[i].img=nuevaImg;

  guardar();
  render();
}

function eliminar(i){
  if(confirm("¬øSeguro que deseas eliminar este producto?")){
    productos.splice(i,1);
    guardar();
    render();
  }
}

function agregar(){
  const nombre=prompt("Nombre del producto:");
  const precio=prompt("Precio:");
  const desc=prompt("Descripci√≥n:");
  const img=prompt("URL de la imagen:");
  const ficha=prompt("Ficha t√©cnica:");

  if(nombre && precio && desc && img && ficha){
    productos.push({nombre,precio,desc,img,ficha});
    guardar();
    render();
  }else{
    alert("Todos los campos son obligatorios");
  }
}

function buscar(txt){
  txt=txt.toLowerCase();
  const filtrados=productos.filter(p=>p.nombre.toLowerCase().includes(txt));
  render(filtrados);
}

function addToCart(i){
  carrito.push(productos[i]);
  mostrarCarrito();
}

function mostrarCarrito(){
  const lista=document.getElementById("cartItems");
  lista.innerHTML="";
  carrito.forEach((p,idx)=>{
    lista.innerHTML+=`<li>${p.nombre} - $${p.precio} <button onclick="removeFromCart(${idx})">‚ùå</button></li>`;
  });
}

function removeFromCart(i){
  carrito.splice(i,1);
  mostrarCarrito();
}

function checkout(){
  if(carrito.length===0){
    alert("El carrito est√° vac√≠o");
    return;
  }
  let mensaje="Hola, quiero comprar:\n";
  carrito.forEach(p=>{
    mensaje+=`- ${p.nombre} (${p.desc}) $${p.precio}\n`;
  });
  const url=`https://wa.me/573001112233?text=${encodeURIComponent(mensaje)}`;
  window.open(url,"_blank");
}
render();
</script>

</body>
</html>
